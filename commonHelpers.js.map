{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\n\nlet lightbox = new SimpleLightbox('.image-card a', { captionsData: \"alt\" });\n\nconst API_KEY = '42176661-60cd7e02e4c469a287416d2c6';\nconst photoEl = document.querySelector('.photo-container-js');\nconst loadBtn = document.querySelector('.load-btn');\nlet currentPage = 1;\nlet currentSearchQuery = '';\n\n\nfunction showLoader() {\n    const loader = document.createElement('div');\n    loader.className = 'loader';\n    photoEl.appendChild(loader);\n}\n\nfunction hideLoader() {\n    const loader = photoEl.querySelector('.loader');\n    if (loader) {\n        loader.remove();\n    }\n}\n\nfunction insertImages(images) {\n    const imageCards = images.map(hit => {\n        return `\n            <li class=\"image-card\">\n                <a class=\"image-link\" href=\"${hit.largeImageURL}\">\n                    <img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\">\n                </a>\n                <div class=\"image-details\">\n                    <p class=\"detail\">Likes ${hit.likes}</p>\n                    <p class=\"detail\">Views ${hit.views}</p>\n                    <p class=\"detail\">Comments ${hit.comments}</p>\n                    <p class=\"detail\">Downloads ${hit.downloads}</p>\n                </div>\n            </li>\n        `;\n    });\n\n    const imageCardHTML = imageCards.join('');\n    photoEl.insertAdjacentHTML('beforeend', imageCardHTML);\n}\n\nasync function performSearch(searchQuery) {\n    showLoader();\n    currentSearchQuery = searchQuery;\n    currentPage = 1;\n    const imageType = 'photo';\n    const orientation = 'horizontal';\n    const safeSearch = true;\n\n    try {\n        const response = await axios.get('https://pixabay.com/api/', {\n            params: {\n                key: API_KEY,\n                q: searchQuery,\n                image_type: imageType,\n                orientation: orientation,\n            safesearch: safeSearch,\n                per_page: 15,\n                page: currentPage\n            }\n        });\n\n        hideLoader();\n\n        const data = response.data;\n\n        const imageContainer = document.getElementById('gallery');\n        imageContainer.innerHTML = '';\n\n        if (parseInt(data.totalHits) > 0) {\n            const images = data.hits.map(item => ({\n                webformatURL: item.webformatURL,\n                tags: item.tags,\n                likes: item.likes,\n                views: item.views,\n                comments: item.comments,\n                downloads: item.downloads,\n                largeImageURL: item.largeImageURL,\n            }));\n\n            insertImages(images);\n\n            lightbox.refresh();\n\n            loadBtn.style.display = 'block';\n        } else {\n            iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: 'topCenter',\n            });\n        }\n    } catch (error) {\n        hideLoader();\n        console.error('Error during fetch:', error.message);\n    }\n}\n\n\nasync function loadMoreImages() {\n    currentPage++;\n    try {\n        const response = await axios.get('https://pixabay.com/api/', {\n            params: {\n                key: API_KEY,\n                q: currentSearchQuery,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                per_page: 15,\n                page: currentPage\n            }\n        });\n\n        const data = response.data;\n\n        if (parseInt(data.totalHits) > 0) {\n            const images = data.hits.map(item => ({\n                webformatURL: item.webformatURL,\n                tags: item.tags,\n                likes: item.likes,\n                views: item.views,\n                comments: item.comments,\n                downloads: item.downloads,\n                largeImageURL: item.largeImageURL,\n            }));\n\n            insertImages(images);\n            lightbox.refresh();\n\n\n            if (currentPage * 15 >= parseInt(data.totalHits)) {\n                document.querySelector('.load-btn').style.display = 'none';\n                iziToast.error({\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: 'topRight',\n                });\n            }\n\n    const cardHeight = document.querySelector('.image-card').getBoundingClientRect().height;\n            \n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: 'smooth'\n});\n\n        } \n    } catch (error) {\n        console.error('Error during fetch:', error.message);\n    }\n}\n\nloadBtn.addEventListener('click', loadMoreImages);\n\ndocument.addEventListener('DOMContentLoaded', function () {\n    document.querySelector('.js-search-form').addEventListener('submit', function (event) {\n        event.preventDefault();\n\n        const searchInputValue = document.querySelector('.input').value;\n        if (searchInputValue.trim() !== '') {\n            performSearch(searchInputValue);\n            loadBtn.style.display = 'none';\n        } else {\n            iziToast.error({\n                message: 'Please enter a valid search query.',\n                position: 'topRight',\n            });\n        }\n\n        event.target.reset();\n    });\n    loadBtn.style.display = 'none';\n});"],"names":["lightbox","SimpleLightbox","API_KEY","photoEl","loadBtn","currentPage","currentSearchQuery","showLoader","loader","hideLoader","insertImages","images","imageCardHTML","hit","performSearch","searchQuery","imageType","orientation","safeSearch","response","axios","data","imageContainer","item","iziToast","error","loadMoreImages","cardHeight","event","searchInputValue"],"mappings":"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"}